@using BierFroh.Modules.Logo
@using MudBlazor.Utilities

<MudGrid>
    <MudItem md="4" Class="d-flex align-center justify-center py-8">
        <MudColorPicker DisableAlpha=true
                        DisableColorField=true
                        DisableInputs=true
                        DisableToolbar=true
                        DisableModeSwitch=true
                        ColorPickerMode=ColorPickerMode.HSL
                        PickerVariant="PickerVariant.Static"
                        ValueChanged="UpdateSelectedColor"
                        Value="value" />
    </MudItem>
    <MudItem md="4" Class="d-flex align-left justify-center py-8">
        @if (image64 is not null)
        {
            <img src=@image64 />
        }
    </MudItem>
</MudGrid>

@code {
    private string? image64;
    private Generator? generator = new Generator(303f);
    private MudColor value = new MudColor(303.0, 1.0, 0.5, 1.0);

    public void Create()
    {
        if (generator is not null)
        {
            image64 = generator.Create();
            StateHasChanged();
        }
    }

    public void UpdateSelectedColor(MudColor mudColor)
    {
        value = mudColor;
        generator = new Generator((float)mudColor.H);
    }
}
